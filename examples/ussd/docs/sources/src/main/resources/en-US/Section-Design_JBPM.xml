<?xml version='1.0'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "JAIN_SLEE_Example_User_Guide.ent">
%BOOK_ENTITIES;
]>

<section id="design_jbpm">
	<title>jBPM</title>

	<para>&THIS.EXAMPLE;
		Example
		<acronym>JBPM</acronym>
		module is used to drive conversation with
		<acronym>USSD</acronym>
		user.
	</para>
	<para>
		Process defined in standard
		<acronym>JPDL</acronym>
		<acronym>XML</acronym>
		consumes
		<acronym>USSD</acronym>
		string (digits) and provides prompt sent back to user. Logically
		<acronym>JBPM</acronym>
		process(state and transitions) create interactive menu accessed by
		<acronym>USSD</acronym>
		user.
	</para>

	<note>
		<para>Defined process and source are not mature code. It is designed
			to be easy to edit for user to alter decision process and menu.
		</para>
	</note>

	<section id="design_jbpm_decision">
		<title>Decisions and transitions</title>
		<para>
			<acronym>JBPM</acronym>
			process consists of states, transitions and in case of this example,
			decisions. I this example decision element chooses transition based
			on provided input.
		</para>
		<para>
			By convention there are two types of transitions, distinguished
			by names:
		</para>
		<variablelist>
			<varlistentry>
				<term>menu</term>
				<listitem>
					<para>with name equal to digit - this transition moves user down(or
						up, depending on transition destination) in menu</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>terminating</term>
				<listitem>
					<para>
						with name equal to "
						<literal>end</literal>
						" - this transition is chosen when no user input can not be
						matched to any defined transition
					</para>

				</listitem>
			</varlistentry>
		</variablelist>
		<para>General overview of decision design is depicted on diagram
			below:</para>
		<mediaobject>
			<imageobject>
				<imagedata width="300px" align="center"
					fileref="images/ussd-design-jbpm-decision.png" format="PNG" />
			</imageobject>
			<caption>
				<para>Decision overview	</para>
			</caption>
		</mediaobject>

	</section>
	<section id="design_jbpm_xml">
		<title>Process design</title>
		<para>
			In this example,
			<acronym>JBPM</acronym>
			process simulates interactive menu. Each
			<acronym>JBPM</acronym>
			state represent menu position. Each transition represent menu
			position change.
		</para>
		<para>Menu position have associated prompt. Its content is what accessing user sees on devices display(for instance cell phone)</para>
		<para>Example declares following menu:</para>
		<variablelist>
			<varlistentry>
				<term>1. schedule</term>
				<listitem>
					<variablelist>
						<varlistentry>
							<term>1. Pune</term>
							<listitem>
								<para>Lists schedule of trains in Pune.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>2. Test location</term>
							<listitem>
								<para>Lists schedule of trains in some artificial town.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>3. Volgograd</term>
							<listitem>
								<para>Lists schedule of trains in Volgograd.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>4. End</term>
							<listitem>
								<para>terminates interaction</para>
							</listitem>
						</varlistentry>
					</variablelist>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>2. location</term>
				<listitem>
					<variablelist>
						<varlistentry>
							<term>1. Pune</term>
							<listitem>
								<para>Lists location of train stations in Pune.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>2. Test location</term>
							<listitem>
								<para>Lists location of train stations in some artificial town.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>3. Volgograd</term>
							<listitem>
								<para>Lists location of train stations in Volgograd.</para>
							</listitem>
						</varlistentry>
						<varlistentry>
							<term>4. End</term>
							<listitem>
								<para>terminates interaction</para>
							</listitem>
						</varlistentry>
					</variablelist>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>3. discount</term>
				<listitem>
					<para>Lists ticket discounts.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>4. promo</term>
				<listitem>
					<para>Trap which loops back to itself.</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</section>



</section>	