<?xml version="1.0" encoding="UTF-8"?>
<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="urn:jboss:bean-deployer:2.0">
	
	<bean name="Mobicents.JAINSLEE.CacheConfig" class="org.jboss.cache.config.Configuration">  
         
      <property name="runtimeConfig">
         <bean name="MobicentsJAINSLEEJBossCacheRuntimeConfig" class="org.jboss.cache.config.RuntimeConfig">
            <property name="transactionManager">
               <inject bean="RealTransactionManager"/>
            </property>
         </bean>
      </property>
      
      <property name="isolationLevel">REPEATABLE_READ</property>
      <property name="cacheMode">LOCAL</property>
      <property name="lockParentForChildInsertRemove">false</property>
      <property name="lockAcquisitionTimeout">15000</property>
      <property name="useLockStriping">false</property>
      
      <demand>RealTransactionManager</demand>
   </bean>
   
	<bean name="Mobicents.JAINSLEE.Cache" class="org.mobicents.cache.MobicentsCache">
		<constructor>
          <parameter class="org.jboss.cache.config.Configuration"><inject bean="Mobicents.JAINSLEE.CacheConfig"/></parameter> 
     	</constructor>		
     	<demand>Mobicents.JAINSLEE.CacheConfig</demand>	
	</bean>

	<bean name="Mobicents.JAINSLEE.JBossCacheJmxWrapper" class="org.jboss.cache.jmx.CacheJmxWrapper">
      <annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="jboss.cache:service=MobicentsSleeCache",exposedInterface=org.jboss.cache.jmx.CacheJmxWrapperMBean.class,registerDirectly=true)</annotation>
      <constructor>
          <parameter><value-factory bean="Mobicents.JAINSLEE.Cache" method="getJBossCache"/></parameter>
      </constructor>
      <demand>Mobicents.JAINSLEE.Cache</demand>	      
   </bean>
   	
	<bean name="Mobicents.JAINSLEE.Cluster" class="org.mobicents.cluster.DefaultMobicentsCluster">
		<constructor>
			<parameter><inject bean="Mobicents.JAINSLEE.Cache"/></parameter>
			<parameter><inject bean="RealTransactionManager"/></parameter>
			<parameter><null/></parameter>
		</constructor>	
		<demand>Mobicents.JAINSLEE.Cache</demand>
		<demand>RealTransactionManager</demand>					
	</bean>
	
	<bean name="Mobicents.JAINSLEE.TransactionManagerMBean"
		class="org.mobicents.slee.runtime.transaction.SleeTransactionManagerImpl"
		autowire-candidate="false">
		<constructor>
			<parameter>
				<inject bean="RealTransactionManager" />
			</parameter>
		</constructor>
		<demand>RealTransactionManager</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.TraceMBean"
		class="org.mobicents.slee.container.management.jmx.TraceMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=Trace",exposedInterface=javax.slee.management.TraceMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.TransactionManagerMBean" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.TransactionManagerMBean</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.AlarmMBean"
		class="org.mobicents.slee.container.management.jmx.AlarmMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=Alarm",exposedInterface=javax.slee.management.AlarmMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.TransactionManagerMBean" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.TraceMBean" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.TransactionManagerMBean</demand>
		<demand>Mobicents.JAINSLEE.TraceMBean</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.Profiles.JPA.HSQLDBConfig" class="org.mobicents.slee.container.deployment.profile.jpa.Configuration">
		<property name="persistProfiles">true</property>
		<property name="clusteredProfiles">false</property>
		<property name="hibernateDatasource">java:/DefaultDS</property>
		<property name="hibernateDialect">org.hibernate.dialect.HSQLDialect</property>
		<depends>jboss.jca:service=DataSourceBinding,name=DefaultDS</depends>
	</bean>
	
	<bean name="Mobicents.JAINSLEE.Profiles.JPA.PostgreSQLConfig" class="org.mobicents.slee.container.deployment.profile.jpa.Configuration">
		<property name="persistProfiles">true</property>
		<property name="clusteredProfiles">false</property>
		<property name="hibernateDatasource">java:/PostgresDS</property>
		<property name="hibernateDialect">org.hibernate.dialect.PostgreSQLDialect</property>
	</bean>
	<bean name="Mobicents.JAINSLEE.UsageMbeans.Config" class="org.mobicents.slee.runtime.usage.UsageMBeansConfiguration">
		<property name="clusteredUsageMBeans">false</property>		
	</bean>
	
	<bean name="Mobicents.JAINSLEE.Container" class="org.mobicents.slee.container.SleeContainer">
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.TransactionManagerMBean" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Cluster" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.AlarmMBean" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.TraceMBean" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Profiles.JPA.HSQLDBConfig" />
			</parameter>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.UsageMbeans.Config" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.TransactionManagerMBean</demand>
		<demand>Mobicents.JAINSLEE.Cluster</demand>
		<demand>Mobicents.JAINSLEE.AlarmMBean</demand>
		<demand>Mobicents.JAINSLEE.TraceMBean</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.DeploymentMBean"
		class="org.mobicents.slee.container.management.jmx.DeploymentMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=Deployment",exposedInterface=org.mobicents.slee.container.management.jmx.DeploymentMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.RmiServerInterfaceMBean"
		class="org.mobicents.slee.container.management.jmx.RmiServerInterfaceMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:service=RmiServerInterfaceMBean",exposedInterface=org.mobicents.slee.container.management.jmx.RmiServerInterfaceMBeanImplMBean.class,registerDirectly=true)</annotation>
	</bean>

	<bean name="Mobicents.JAINSLEE.ServiceManagementMBean"
		class="org.mobicents.slee.container.management.jmx.ServiceManagementMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=ServiceManagement",exposedInterface=org.mobicents.slee.container.management.jmx.ServiceManagementMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.ProfileProvisoningMBean"
		class="org.mobicents.slee.container.management.jmx.ProfileProvisioningMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=ProfileProvisioning",exposedInterface=javax.slee.management.ProfileProvisioningMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.ResourceManagementMBean"
		class="org.mobicents.slee.container.management.jmx.ResourceManagementMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=ResourceManagement",exposedInterface=org.mobicents.slee.container.management.jmx.ResourceManagementMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.SbbEntitiesMBean"
		class="org.mobicents.slee.container.management.jmx.SbbEntitiesMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:name=SbbEntitiesMBean",exposedInterface=org.mobicents.slee.container.management.jmx.SbbEntitiesMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.ActivityManagementMBean"
		class="org.mobicents.slee.container.management.jmx.ActivityManagementMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:name=ActivityManagementMBean",exposedInterface=org.mobicents.slee.container.management.jmx.ActivityManagementMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<demand>Mobicents.JAINSLEE.Container</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.MobicentsManagement"
		class="org.mobicents.slee.container.management.jmx.MobicentsManagement">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:service=MobicentsManagement",exposedInterface=org.mobicents.slee.container.management.jmx.MobicentsManagementMBean.class,registerDirectly=true)</annotation>
		<property name="entitiesRemovalDelay">1</property>
		<property name="monitoringUncommittedAcAttachs">true</property>
		<property name="eventRouterExecutors">64</property>
		<property name="loadClassesFirstFromAS">true</property>
	</bean>

	<bean name="Mobicents.JAINSLEE.SleeManagement"
		class="org.mobicents.slee.container.management.jmx.SleeManagementMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="javax.slee.management:name=SleeManagement",exposedInterface=org.mobicents.slee.container.management.jmx.SleeManagementMBeanImplMBean.class,registerDirectly=true)</annotation>
		<constructor>
			<parameter>
				<inject bean="Mobicents.JAINSLEE.Container" />
			</parameter>
		</constructor>
		<property name="deploymentMBean">
			<value-factory bean="Mobicents.JAINSLEE.DeploymentMBean"
				method="getObjectName" />
		</property>
		<property name="serviceManagementMBean">
			<value-factory bean="Mobicents.JAINSLEE.ServiceManagementMBean"
				method="getObjectName" />
		</property>
		<property name="profileProvisioningMBean">
			<value-factory bean="Mobicents.JAINSLEE.ProfileProvisoningMBean"
				method="getObjectName" />
		</property>
		<property name="resourceManagementMBean">
			<value-factory bean="Mobicents.JAINSLEE.ResourceManagementMBean"
				method="getObjectName" />
		</property>
		<property name="sbbEntitiesMBean">
			<value-factory bean="Mobicents.JAINSLEE.SbbEntitiesMBean"
				method="getObjectName" />
		</property>
		<property name="rmiServerInterfaceMBean">
			<value-factory bean="Mobicents.JAINSLEE.RmiServerInterfaceMBean"
				method="getObjectName" />
		</property>
		<property name="activityManagementMBean">
			<value-factory bean="Mobicents.JAINSLEE.ActivityManagementMBean"
				method="getObjectName" />
		</property>
		<demand>Mobicents.JAINSLEE.Container</demand>
		<demand>Mobicents.JAINSLEE.DeploymentMBean</demand>
		<demand>Mobicents.JAINSLEE.ServiceManagementMBean</demand>
		<demand>Mobicents.JAINSLEE.ProfileProvisoningMBean</demand>
		<demand>Mobicents.JAINSLEE.ResourceManagementMBean</demand>
		<demand>Mobicents.JAINSLEE.SbbEntitiesMBean</demand>
		<demand>Mobicents.JAINSLEE.ActivityManagementMBean</demand>
		<demand>Mobicents.JAINSLEE.RmiServerInterfaceMBean</demand>
		<demand>Mobicents.JAINSLEE.MobicentsManagement</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.DeployerMBean"
		class="org.mobicents.slee.container.deployment.jboss.DeploymentManagerMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:name=DeployerMBean",exposedInterface=org.mobicents.slee.container.deployment.jboss.DeploymentManagerMBean.class,registerDirectly=true)</annotation>
		<demand>Mobicents.JAINSLEE.SleeManagement</demand>
	</bean>
	
	<bean name="Mobicents.JAINSLEE.LogManagementMBean"
		class="org.mobicents.slee.container.management.jmx.log.MobicentsLogManagerMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:name=LogManagementMBean",exposedInterface=org.mobicents.slee.container.management.jmx.log.MobicentsLogManagerMBeanImplMBean.class,registerDirectly=true)</annotation>
		<demand>Mobicents.JAINSLEE.SleeManagement</demand>
	</bean>

	<bean name="Mobicents.JAINSLEE.PolicyManagementMBean"
		class="org.mobicents.slee.container.management.jmx.PolicyMBeanImpl">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents.slee:name=PolicyManagementMBean",exposedInterface=org.mobicents.slee.container.management.jmx.PolicyMBeanImplMBean.class,registerDirectly=true)</annotation>
		<demand>Mobicents.JAINSLEE.SleeManagement</demand>
		<property name="useMPolicy">true</property>
	</bean>

</deployment>